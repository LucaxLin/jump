System.register("chunks:///_virtual/constant.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"cb6adecY+pLlr/gMY629rcR","constant",void 0);t("BLOCK_SIZE",64),t("PHYSICS_GROUP",{ground:1,trap:2});c._RF.pop()}}}));

System.register("chunks:///_virtual/FloorBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,r,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,n=o._decorator,c=o.Component}],execute:function(){var e;r._RF.push({},"fe6b2sRqNpEGa5dXSMEGNla","FloorBlock",void 0);var l=n.ccclass;n.property,o("FloorBlock",l("FloorBlock")(e=function(o){function r(){return o.apply(this,arguments)||this}t(r,o);var n=r.prototype;return n.start=function(){},n.update=function(o){},r}(c))||e);r._RF.pop()}}}));

System.register("chunks:///_virtual/floorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FloorBlock.ts","./constant.ts"],(function(o){var t,r,e,n,i,a,l,s,c,f,u,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,r=o.inheritsLoose,e=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,a=o._decorator,l=o.Prefab,s=o.instantiate,c=o.Vec3,f=o.Component},function(o){u=o.FloorBlock},function(o){p=o.BLOCK_SIZE}],execute:function(){var h,g,b,y,P,d,v,B,k;i._RF.push({},"fdd13Yr4rdOpImMYdRlOwC5","floorManager",void 0);var m=a.ccclass,w=a.property;o("floorManager",(h=m("floorManager"),g=w({type:l,tooltip:"floor预制体"}),b=w({tooltip:"地板起始位置"}),y=w({tooltip:"地板长度（方块数量）"}),h((v=t((d=function(o){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i))||this,e(t,"floorBlockPrefab",v,n(t)),e(t,"startPos",B,n(t)),e(t,"floorLength",k,n(t)),t.floorBlocks=[],t}r(t,o);var i=t.prototype;return i.start=function(){this.generateFloor()},i.generateFloor=function(){for(var o=0;o<this.floorLength;o++){var t=s(this.floorBlockPrefab);t.name="floorBlock",t.parent=this.node;var r=new c(this.startPos.x+o*p,this.startPos.y,this.startPos.z);t.setPosition(r);var e=t.getComponent(u);this.floorBlocks.push(e)}},i.update=function(o){},t}(f)).prototype,"floorBlockPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(d.prototype,"startPos",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,0)}}),k=t(d.prototype,"floorLength",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),P=d))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FloorBlock.ts","./MoveTrap.ts","./PlayerController.ts","./Trap.ts","./constant.ts","./floorManager.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoveTrap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Trap.ts"],(function(e){var t,i,r,o,n,p,s,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,p=e._decorator,s=e.Node,a=e.Vec3},function(e){c=e.Trap}],execute:function(){var l,u,d,y,h;n._RF.push({},"f35bcyGOV5DoYKpG9bKmAis","MoveTrap",void 0);var f=p.ccclass,g=p.property;e("MoveTrap",(l=f("MoveTrap"),u=g({type:s,tooltip:"player 节点"}),l((h=t((y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),p=0;p<i;p++)n[p]=arguments[p];return t=e.call.apply(e,[this].concat(n))||this,r(t,"player",h,o(t)),t._speed=300,t.triggered=!1,t}i(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){this.player.position.x>=this.node.position.x&&!this.triggered&&(this.node.position=new a(this.node.position.x+100,this.node.position.y,this.node.position.z),this.triggered=!0)},t}(c)).prototype,"player",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./Trap.ts"],(function(i){var t,e,o,n,r,s,l,a,h,u,c,d,p,y,g,m,v;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,l=i.Vec2,a=i.Animation,h=i.RigidBody2D,u=i.input,c=i.Input,d=i.Collider2D,p=i.Contact2DType,y=i.Vec3,g=i.Component},function(i){m=i.PHYSICS_GROUP},function(i){v=i.Trap}],execute:function(){var f,D,T,C,M,b,w,B,E,V,_;r._RF.push({},"75b69aaYCZH1biBSVy1sgR1","PlayerController",void 0);var P=s.ccclass,S=s.property;i("PlayerControll",(f=P("PlayerControll"),D=S({tooltip:"移动速度"}),T=S({tooltip:"是否面向右（初始朝向）"}),C=S({tooltip:"跳跃速度"}),M=S({tooltip:"跳跃冷却时间（秒）"}),f((B=t((w=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,o(t,"moveSpeed",B,n(t)),o(t,"isFaceRight",E,n(t)),o(t,"jumpSpeed",V,n(t)),o(t,"jumpCD",_,n(t)),t.isGrounded=!0,t.isJumpEndTriggered=!1,t.tempVec2=new l(0,0),t.lastJumpTime=0,t.groundVelocityThreshold=.1,t.rigidBody=null,t.animation=null,t.collider=null,t.curMoveThreshold=.001,t.curMoveDir=0,t.allowMove=!0,t.isHurt=!1,t}e(t,i);var r=t.prototype;return r.onLoad=function(){this.animation=this.getComponent(a),this.rigidBody=this.getComponent(h),u.on(c.EventType.KEY_DOWN,this.onKeyDown,this),u.on(c.EventType.KEY_UP,this.onKeyUp,this),this.collider=this.getComponent(d),this.collider&&this.collider.on(p.BEGIN_CONTACT,this.onCollisionEnter2D,this)},r.onKeyDown=function(i){switch(i.keyCode){case 37:this.curMoveDir=-1;break;case 39:this.curMoveDir=1;break;case 32:this.jump()}},r.onKeyUp=function(i){switch(this.allowMove=!0,i.keyCode){case 37:-1===this.curMoveDir&&(this.curMoveDir=-this.curMoveThreshold);break;case 39:1===this.curMoveDir&&(this.curMoveDir=this.curMoveThreshold)}},r.jump=function(){var i=Date.now()/1e3;i-this.lastJumpTime<this.jumpCD||Math.abs(this.rigidBody.linearVelocity.y)<this.groundVelocityThreshold&&this.isGrounded&&(this.rigidBody.applyLinearImpulse(new l(0,this.jumpSpeed),this.rigidBody.getWorldCenter(this.tempVec2),!0),this.isGrounded=!1,this.lastJumpTime=i)},r.onCollisionEnter2D=function(i,t){var e=this;"door"===t.node.name&&(this.allowMove=!1),t.tag!==m.ground||this.isJumpEndTriggered?t.tag===m.trap&&this.handleHitTrap(t.node.getComponent(v)):(this.isGrounded=!0,this.isHurt=!1,this.isJumpEndTriggered=!0,setTimeout((function(){e.isJumpEndTriggered=!1}),100))},r.handleHitTrap=function(i){this.isHurt=!0,this.rigidBody.linearVelocity=new l(0,0),this.rigidBody.angularVelocity=0,i.getComponent(d).enabled=!1,setTimeout((function(){i.getComponent(d).enabled=!0}),100),this.rigidBody.applyLinearImpulse(i.force,this.rigidBody.getWorldCenter(this.tempVec2),!0),console.log("linearVelocity",this.rigidBody.linearVelocity)},r.playAnimation=function(i){var t;null!=(t=this.animation.getState(i))&&t.isPlaying||this.animation.crossFade(i,.1)},r.flipPlayer=function(i){this.isFaceRight!==i&&(this.isFaceRight=i,this.node.setScale(new y(i?1:-1,1,1)))},r.update=function(i){var t=this.rigidBody.linearVelocity;t.x=this.curMoveDir*this.moveSpeed,t.y=this.rigidBody.linearVelocity.y,this.rigidBody.linearVelocity=t,this.isHurt?this.playAnimation("player_hurt"):Math.abs(this.curMoveDir)>this.curMoveThreshold&&this.isGrounded?this.playAnimation("player_walk"):this.isGrounded?this.playAnimation("player_stand"):this.playAnimation("player_jump"),this.flipPlayer(Math.abs(this.curMoveDir)>this.curMoveThreshold?this.curMoveDir>0:this.isFaceRight),this.isHurt||Math.abs(this.curMoveDir)>this.curMoveThreshold&&this.allowMove&&this.node.setPosition(this.node.position.add3f(this.curMoveDir*this.moveSpeed*i,0,0))},r.onDestroy=function(){u.off(c.EventType.KEY_DOWN,this.onKeyDown,this),u.off(c.EventType.KEY_UP,this.onKeyUp,this),this.collider&&this.collider.off(p.BEGIN_CONTACT,this.onCollisionEnter2D,this)},t}(g)).prototype,"moveSpeed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),E=t(w.prototype,"isFaceRight",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=t(w.prototype,"jumpSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),_=t(w.prototype,"jumpCD",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),b=w))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Trap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,n,o,i,a,c,p;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){i=r.cclegacy,a=r._decorator,c=r.Component,p=r.Vec2}],execute:function(){var u,s,l,f,y;i._RF.push({},"e14a4NMTLJE3L3zJkBnLUfs","Trap",void 0);var h=a.ccclass,v=a.property;r("Trap",(u=h("Trap"),s=v({tooltip:"陷阱反弹力度"}),u((y=e((f=function(r){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=r.call.apply(r,[this].concat(i))||this,n(e,"force",y,o(e)),e}t(e,r);var i=e.prototype;return i.start=function(){},i.update=function(r){},e}(c)).prototype,"force",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-100,150)}}),l=f))||l));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});